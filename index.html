<!DOCTYPE html>
<!--generated by haroopad (http://pad.haroopress.com)-->
<html>
<head>
<meta charset="utf-8" />
<title>kahyi.html</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="clearness.css" />
</head>
<body class="markdown clearness">
<h1 id="가희"><a name="가희" href="#가희"></a>가희</h1>
<p>—Mayu Laierlence</p>
<p><strong>가희</strong>는 한글로 된 <a href="http://ko.wikipedia.org/wiki/난해한_프로그래밍_언어">난해한 프로그래밍 언어</a>입니다.</p>
<blockquote>
<p>이 문서는 <a href="http://aheui.github.io/specification.ko/">아희</a> 확장에 대해 설명하고 있습니다. 이 문서에서 설명하지 않은 부분은 <a href="http://aheui.github.io/specification.ko/">아희</a> 표준 사양 페이지를 참고하세요.</p>
</blockquote>
<h2 id="목차"><a name="목차" href="#목차"></a>목차</h2>
<p class="toc" style="undefined"></p><h2 id="코드"><a name="코드" href="#코드"></a>코드</h2>
<p>가희 코드는 언제나 다음 조건을 만족합니다.</p>
<ol>
<li>가희 코드는 BOM 없는 UTF-8로 인코딩되어있어야 합니다.</li><li>가희 코드는 줄 수와 줄 길이가 각각 32비트의 부호를 갖지 않는 정수의 최대값보다 적어야만 합니다.</li><li>줄바꿈 기호를 제외한 모든 문자는 한 칸으로 취급하며, 반각과 전각은 구분하지 않습니다.</li><li>줄바꿈 기호는 <code>CRLF</code>, <code>CR</code> 또는 <code>LF</code> 중 하나입니다. 하나의 코드에 여러 줄바꿈 기호를 섞어 사용할 수는 없습니다.</li><li>줄바꿈 기호는 코드 맵을 만들 때만 사용되고, 문자로서 취급되지는 않습니다.</li><li>코드 맵은 언제나 직사각형의 형태를 갖게 됩니다. 코드 맵의 오른쪽 끝은 가장 긴 칸을 갖는 줄의 너비이고, 그보다 짧은 칸을 갖는 줄은 가장 긴 칸을 갖는 줄의 길이에 맞게 줄 끝을 가상의 공백 문자로 채웁니다.</li></ol>
<h2 id="값"><a name="값" href="#값"></a>값</h2>
<p>값은 최소 32비트의 부호를 갖는 정수를 의미합니다. 값은 수치에 상응하는 유니코드 문자로 변환할 수 있습니다.</p>
<h2 id="공간"><a name="공간" href="#공간"></a>공간</h2>
<p>공간은 값을 기억 또는 송수신할 수 있는 모든 것을 의미합니다. 끝소리 없음을 제외한 모든 공간은 모든 스레드에서 공유합니다.</p>
<h3 id="스택"><a name="스택" href="#스택"></a>스택</h3>
<p>스택은 먼저 넣은 값이 나중에 나오게 되는 형태의 공간을 이야기합니다. 끝소리 ㅇ과 ㅎ을 제외한 모든 공간의 기본값입니다. 가질 수 있는 값의 갯수는 적어도 32비트의 부호를 갖지 않는 정수의 최대값이어야 합니다.</p>
<h3 id="큐"><a name="큐" href="#큐"></a>큐</h3>
<p>큐는 먼저 넣은 값이 먼저 나오게 되는 형태의 공간을 이야기합니다. 끝소리 ㅇ의 기본값입니다. 가질 수 있는 값의 갯수는 적어도 32비트의 부호를 갖지 않는 정수의 최대값이어야 합니다.</p>
<h3 id="스트림(통로)"><a name="스트림(통로)" href="#스트림(통로)"></a>스트림(통로)</h3>
<p>스트림은 외부와 데이터를 주고받는 형태의 공간을 이야기합니다. 끝소리 ㅎ의 기본값이며, 따로 설정하지 않았을 경우 *nix의 경우 <code>/dev/null</code>, Windows의 경우 <code>NUL</code>로 연결됩니다. 읽고 쓸 수 있는 값의 갯수는 환경에 따라 다를수 있습니다.</p>
<h2 id="명령"><a name="명령" href="#명령"></a>명령</h2>
<ul>
<li><em>아무 끝소리</em>는 끝소리가 없는 상태를 포함합니다.</li><li><em>먼저 이동</em>은 가운뎃소리를 읽은 뒤에 명령을 처리하고 이동합니다. 오류로 인한 방향 반전과 가리키는 곳이 바뀌는 것으로 인한 방향 변경을 무시합니다.</li><li><em>나중 이동</em>은 명령을 처리한 뒤에 가운뎃소리를 읽고 이동합니다. 오류로 인한 방향 반전과 가리키는 곳이 바뀌는 것으로 인한 방향 변경을 반영합니다.</li></ul>
<h3 id="없음"><a name="없음" href="#없음"></a>없음</h3>
<ul>
<li><strong>ㅇ</strong> + <em>아무 끝소리</em>: (먼저 이동) 아무것도 하지 않음.</li></ul>
<h3 id="갈피"><a name="갈피" href="#갈피"></a>갈피</h3>
<p>갈피는 고급 언어의 <em>레이블</em>에 해당하는 부분입니다. 끝소리 있는 <strong>ㅋ</strong> 명령 등으로 다른 갈피로 이동하기 전에 포인터가 가리키는 위치가 포인터 스택에 들어갑니다. 이 후에 끝소리 없는 <strong>ㄱ</strong> 명령이나 <strong>ㅋ</strong> 명령을 사용하면 포인터 스택에서 이전 위치를 불러와 해당 위치로 이동하게 됩니다. 포인터 스택이 비어있으면 오류로 판단하고 방향을 반전합니다. <strong>ㄲ</strong> 명령을 받침 없이 사용해 멀티 스레드를 시작하면 코드의 왼쪽 위부터 아래로 읽기 시작하는 규칙이 적용됩니다. 갈피는 끝소리 없음을 제외하고는 비어 있으며, 빈 갈피로 가려고 하면 오류로 처리되어 방향이 반전됩니다. 끝소리 없음을 제외한 모든 갈피는 덮어쓸 수 있습니다.</p>
<ul>
<li><strong>ㄱ</strong> + <em>끝소리 없음</em>: (나중 이동) 갈피를 부른 곳으로 돌아가기. (새롬)</li><li><strong>ㄱ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (먼저 이동) 끝소리 갈피를 지금 가리키는 곳으로 지정. (새롬)</li><li><strong>ㄲ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (먼저 이동) 끝소리 갈피에서 새 스레드. (새롬)</li><li><strong>ㅋ</strong> + <em>끝소리 없음</em>: (먼저 이동) 갈피를 부른 곳으로 돌아가기. (새롬)</li><li><strong>ㅋ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (먼저 이동) 끝소리 갈피로 가기. (새롬)</li></ul>
<h3 id="셈"><a name="셈" href="#셈"></a>셈</h3>
<p>기본적인 동작은 아희와 같습니다.</p>
<ul>
<li><strong>ㄴ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값에 나눈 값을 넣기.</li><li><strong>ㄴ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값에 나눈 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㄷ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값에 더한 값을 넣기.</li><li><strong>ㄷ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값에 더한 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㄸ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값에 곱한 값을 넣기.</li><li><strong>ㄸ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값에 곱한 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㄹ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값에 나눈 나머지 값을 넣기.</li><li><strong>ㄹ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값에 나눈 나머지 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㅌ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값에 뺀 값을 넣기.</li><li><strong>ㅌ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값에 뺀 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li></ul>
<h3 id="읽고-쓰기"><a name="읽고-쓰기" href="#읽고-쓰기"></a>읽고 쓰기</h3>
<p>기본적인 동작은 아희와 같습니다.</p>
<ul>
<li><strong>ㅁ</strong> + <em>끝소리 없음</em>: (나중 이동) 한 값을 뽑아 버리기.</li><li><strong>ㅁ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 한 값을 뽑아 버리기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㅁ</strong> + <em>끝소리 <strong>ㅇ</strong></em>: (나중 이동) 한 값을 뽑아 숫자로 써내기.</li><li><strong>ㅁ</strong> + <em>끝소리 <strong>ㅎ</strong></em>: (나중 이동) 한 값을 뽑아 문자로 써내기.</li><li><strong>ㅂ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 아무 끝소리</em>: (먼저 이동) 끝소리 값을 넣기.</li><li><strong>ㅂ</strong> + <em>끝소리 <strong>ㅇ</strong></em>: (나중 이동) 숫자를 값으로서 읽어들여 넣기.</li><li><strong>ㅂ</strong> + <em>끝소리 <strong>ㅎ</strong></em>: (나중 이동) 문자를 값으로서 읽어들여 넣기.</li></ul>
<h4 id="큐와-스택"><a name="큐와-스택" href="#큐와-스택"></a>큐와 스택</h4>
<p>기본적인 동작은 아희와 같습니다.</p>
<ul>
<li><strong>ㅃ</strong> + <em>끝소리 없음</em>: (나중 이동) 한 값을 뽑아 큐라면 맨 앞에, 스택이라면 맨 위에 두 번 넣기.</li><li><strong>ㅃ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 한 값을 뽑아 큐라면 맨 앞에, 스택이라면 맨 위에 두 번 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㅍ</strong> + <em>끝소리 없음</em>: (나중 이동) 앞쪽 두 값을 서로 바꾸기.</li><li><strong>ㅍ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 앞쪽 두 값을 서로 바꾸기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li></ul>
<h4 id="스트림-(통로)"><a name="스트림-(통로)" href="#스트림-(통로)"></a>스트림 (통로)</h4>
<p><strong>ㅍ</strong> 명령의 동작을 불분명하게 나타내고 있는 아희와는 달리, 가희에서는 나중 이동을 하는 <strong>ㅇ</strong> 명령처럼 동작합니다.</p>
<ul>
<li><strong>ㅃ</strong> + <em>끝소리 없음</em>: (나중 이동) 마지막으로 보낸 값을 넣기.</li><li><strong>ㅃ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 마지막으로 보낸 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li></ul>
<h3 id="공간"><a name="공간" href="#공간"></a>공간</h3>
<p>아희와 같습니다.</p>
<ul>
<li><strong>ㅅ</strong> + <em>아무 끝소리</em>: (나중 이동) 끝소리 공간을 선택.</li><li><strong>ㅆ</strong> + <em>아무 끝소리</em>: (나중 이동) 한 값을 뽑아 끝소리 공간에 넣기.</li></ul>
<h3 id="견주기"><a name="견주기" href="#견주기"></a>견주기</h3>
<p><strong>ㅉ</strong> 명령으로 난수를 생성할 수 있습니다. 뽑은 값이 3이면 0부터 2 사이의 임의의 값을 넣습니다. 값을 뽑지 못했다면 오류로 판단합니다.</p>
<ul>
<li><strong>ㅈ</strong> + <em>끝소리 없음</em>: (나중 이동) 두 값을 뽑아 나중 값이 크거나 같으면 1, 아니면 0을 넣기.</li><li><strong>ㅈ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 두 값을 뽑아 나중 값이 크거나 같으면 1, 아니면 0을 넣기. <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㅉ</strong> + <em>끝소리 없음</em>: (나중 이동) 한 값을 뽑아 0이면 뽑은 값을, 양수면 0부터 뽑은 값-1 사이의 아무 값을, 음수면 -1부터 뽑은 값 사이의 아무 값을 넣기. (새롬)</li><li><strong>ㅉ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 한 값을 뽑아 0이면 뽑은 값을, 양수면 0부터 뽑은 값-1 사이의 아무 값을, 음수면 -1부터 뽑은 값 사이의 아무 값을 넣기. (새롬) <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li><li><strong>ㅊ</strong> + <em>끝소리 없음</em>: (나중 이동) 한 값을 뽑아 0이 아니면 가운뎃소리의 방향, 아니면 반대 방향으로 옮기기.</li><li><strong>ㅊ</strong> + <em><strong>ㅇ</strong> 또는 <strong>ㅎ</strong>을 제외한 끝소리</em>: (나중 이동) 한 값을 뽑아 0이 아니면 가운뎃소리의 방향, 아니면 반대 방향으로 옮기기. <sup class="footnote-ref" id="fnref-f1"><a href="#fn-f1">1</a></sup></li></ul>
<h3 id="끝내기"><a name="끝내기" href="#끝내기"></a>끝내기</h3>
<ul>
<li><strong>ㅎ</strong> + <em>끝소리 없음</em>: (먼저 이동) 한 값을 뽑아 돌려준 뒤 끝내기.</li></ul>
<h2 id="이동"><a name="이동" href="#이동"></a>이동</h2>
<p>어떤 가운뎃소리는 이동 방향과 칸 수를 갖습니다.</p>
<table>
<thead>
<tr>
<th style="text-align:center">가운뎃소리</th>
<th style="text-align:center">방향</th>
<th style="text-align:center">칸 수</th>
<th style="text-align:center">아희 호환성</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ㅏ</td>
<td style="text-align:center">&rarr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅑ</td>
<td style="text-align:center">&rarr;</td>
<td style="text-align:center">2</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅓ</td>
<td style="text-align:center">&larr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅕ</td>
<td style="text-align:center">&larr;</td>
<td style="text-align:center">2</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅗ</td>
<td style="text-align:center">&uarr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅛ</td>
<td style="text-align:center">&uarr;</td>
<td style="text-align:center">2</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅜ</td>
<td style="text-align:center">&darr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅠ</td>
<td style="text-align:center">&darr;</td>
<td style="text-align:center">2</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅘ</td>
<td style="text-align:center">&nearr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center"><sup class="footnote-ref" id="fnref-f2"><a href="#fn-f2">2</a></sup></td>
</tr>
<tr>
<td style="text-align:center">ㅝ</td>
<td style="text-align:center">&swarr;</td>
<td style="text-align:center">1</td>
<td style="text-align:center"><sup class="footnote-ref" id="fnref-f2"><a href="#fn-f2">2</a></sup></td>
</tr>
</tbody>
</table>
<p>어떤 가운뎃소리는 이동 방향을 변경합니다.</p>
<table>
<thead>
<tr>
<th style="text-align:center">가운뎃소리</th>
<th style="text-align:left">설명</th>
<th style="text-align:center">아희 호환성</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">ㅡ</td>
<td style="text-align:left">세로축 방향을 반전합니다.</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅢ</td>
<td style="text-align:left">가로&middot;세로축 방향을 반전합니다.</td>
<td style="text-align:center">&check;</td>
</tr>
<tr>
<td style="text-align:center">ㅣ</td>
<td style="text-align:left">가로축 방향을 반전합니다.</td>
<td style="text-align:center">&check;</td>
</tr>
</tbody>
</table>
<p>커서가 코드 맵 밖으로 나갔다면 반대쪽 끝으로 돌아갑니다.</p>
<pre><code>반받아우
다망희아
</code></pre><p>위 코드는 아래와 같은 흐름으로 실행됩니다.</p>
<pre><code>㉠㉡㉢㉣
㉥㉦㉧㉤㉥
</code></pre><p>커서가 코드 맵 밖으로 한 칸 더 나갔다면 반대쪽 끝에서 한 칸 떨어진 위치로 돌아갑니다.</p>
<pre><code>뱐뱓어우
먕더희야
</code></pre><p>위 코드는 아래와 같은 흐름으로 실행됩니다.</p>
<pre><code>㉠㉢㉡㉣
㉦㉥㉧㉤　㉥
</code></pre><h2 id="예제"><a name="예제" href="#예제"></a>예제</h2>
<p>다음은 0으로 나눌 때 42가 나오는 가희 코드입니다.</p>
<pre><code>국　　　　　　　-- 갈피 ㄱ 등록
밝밦뚜　　　　　-- 42를 넣기
　　규　　　　　-- 선언 시에는 돌아갈 곳이 없으므로 오류로 처리되어 방향 반전
　　　　　　　　   오류에서 왔다면 해당 명령이 있던 곳으로 돌아감
　　반부　　　　-- 2와 0을 차례대로 넣기
　　　뉵　　　　-- 나누는 중 오류가 발생했을 경우 갈피 ㄱ으로 가기 (나중 이동)
　　　　　　　　   돌아왔을 때 이 명령의 방향과 거리가 유지됨
　　　망희　　　-- 값을 출력하고 종료
</code></pre><h2 id="사족"><a name="사족" href="#사족"></a>사족</h2>
<p><strong>가희</strong>는 <em>아희</em>에 기능을 더했다(加)는 뜻과, 가희의 가장 큰 특징인 갈피 관련 기능이 <strong>ㄱ</strong> 묶음이라는 것을 나타내는 이름입니다. <code>가희</code> 자체는 실행시키면 방향이 뒤바뀌어 안전하게 끝나는, 가희 언어로 쓰여진 코드입니다. 하지만 사실은 <em>歌姫</em>라는 어감이 아름다워서 이렇게 정했습니다.</p>
<h2 id="처리기"><a name="처리기" href="#처리기"></a>처리기</h2>
<p>가희 처리기는 다음과 같은 조건을 만족해야 합니다.</p>
<ol>
<li>완전한 아희 코드는 완전한 가희 코드입니다. 가희와 같은 <a href="#코드">코드 규칙</a>과 <a href="#이동">이동 규칙</a>을 갖는 아희 처리기에서 완전한 아희 코드를 실행한 결과는 같은 코드를 가희 처리기에서 실행한 결과와 정확히 일치해야 합니다.<sup class="footnote-ref" id="fnref-f3"><a href="#fn-f3">3</a></sup></li><li>처리기는 처리를 위해 입력받은 코드를 절대로 변경해선 안됩니다. 여기에는 입력받은 코드의 선행&middot;후행 공백을 무시하거나, 마지막 줄 뒤에 가상의 빈 줄을 추가하는 것 따위도 해당됩니다.</li><li>줄바꿈 기호는 <code>CRLF</code>, <code>CR</code> 또는 <code>LF</code> 중 하나입니다. <code>CRLF</code>가 하나라도 있을 경우 <code>CRLF</code>를 줄바꿈 기호로 사용하고, <code>CRLF</code>가 없고 <code>CR</code>이 하나라도 있을 경우 <code>CR</code>를 줄바꿈 기호로 사용하고, 둘 다 없으면 <code>LF</code>를 줄바꿈 기호로 사용합니다.</li></ol>
<h2 id="구현체"><a name="구현체" href="#구현체"></a>구현체</h2>
<ul>
<li><strong><a href="kahyi.html">자바스크립트로 된 가희 처리기</a></strong></li></ul>
<hr><ol class="footnotes"><li id="fn-f1"><p>처리 도중 오류가 발생하면 현재 처리를 취소하고, 끝소리 갈피로 <em>나중 이동</em>을 합니다. 끝소리 갈피가 없으면 일반 오류로 취급하고 방향을 반전합니다.<a href="#fnref-f1">&#8617;</a></p>
</li><li id="fn-f2"><p>가희에만 있는 이동 규칙으로, 완전한 아희 코드에는 이 가운뎃소리가 없어야 합니다.<a href="#fnref-f2">&#8617;</a></p>
</li><li id="fn-f3"><p>완전한 아희 코드란 아희 표준에 정의된 첫소리&middot;가운뎃소리&middot;끝소리와 가희에서 새로이 정의되지 않은 첫소리&middot;가운뎃소리&middot;끝소리만이 사용된 한글 문자 및 한글 이외의 문자가 사용된 코드를 이야기합니다.<a href="#fnref-f3">&#8617;</a></p>
</li></ol>
</body>
</html>
